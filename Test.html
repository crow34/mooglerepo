<!DOCTYPE html>
<html>
<head>
    <title>TMDB Movie Trailers</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #trailer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        #poster {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200px;
        }
    </style>
</head>
<body>
    <iframe id="trailer" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <img id="poster" />
    <script>
        var page = 1;
        var apiKey = '194d885d6be15594b97e2d1f3b2526be';
        var baseUrl = 'https://api.themoviedb.org/3';
        var trailerPlayer = document.getElementById('trailer');
        var poster = document.getElementById('poster');
        var movies = [];
        var currentMovie = 0;
        var currentTrailer = 0;
        var trailerDuration = 60000; // 1 minute in milliseconds

        function fetchMovies() {
            return fetch(`${baseUrl}/discover/movie?api_key=${apiKey}&region=US,GB&year=1985&page=${page}`)
                .then(response => response.json())
                .then(data => {
                    movies = movies.concat(data.results);
                    page++;
                });
        }

        function fetchTrailers(movie) {
            return fetch(`${baseUrl}/movie/${movie.id}/videos?api_key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    return data.results.filter(video => video.site === 'YouTube' && video.type === 'Trailer');
                });
        }

        function playTrailer(trailers) {
            if (currentTrailer < trailers.length) {
                var trailer = trailers[currentTrailer++];
                trailerPlayer.src = `https://www.youtube.com/embed/${trailer.key}?autoplay=1&mute=1&controls=0&showinfo=0`;
                setTimeout(() => playTrailer(trailers), trailerDuration);
            } else {
                playNextMovie();
            }
        }

        function playNextMovie() {
            if (currentMovie < movies.length) {
                var movie = movies[currentMovie++];
                poster.src = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;
                fetchTrailers(movie).then(playTrailer);
            } else {
                fetchMovies().then(playNextMovie);
            }
        }

        fetchMovies().then(playNextMovie);
    </script>
</body>
</html>
